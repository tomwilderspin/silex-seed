data:
  build: .
  volumes:
    - /vagrant:/app
composer:
  build: tomwilderspin/composer
  volumes_from:
    - data
hhvm:
  build: tomwilderspin/hhvm
  volumes:
    - /vagrant/hhvm/logs/hhvm/:/var/log/hhvm/
  volumes_from:
    - data
nginx:
  build: tomwilderspin/nginx
  volumes_from:
    - data
  ports:
   - "80:80"
  volumes:
    - /vagrant/nginx/logs/:/var/log/nginx/
  links:
    - hhvm:hhvm
shipyard:
    image: shipyard/shipyard
    ports:
        - "8005:8080"
    volumes:
      - /var/run/docker.sock:/docker.sock
    links:
        - rethinkdb:rethinkdb
rethinkdb:
    image: shipyard/rethinkdb
    expose:
        - "8080"
        - "28015"
        - "29015"


